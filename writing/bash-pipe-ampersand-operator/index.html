<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Joel Kitching"><link rel="shortcut icon" href=https://joelkitching.com/favicon.ico><link rel=stylesheet href=/css/style.min.css><link rel=canonical href=https://joelkitching.com/writing/bash-pipe-ampersand-operator/><title>The |& operator: piping stderr since 1978</title></head><body><header id=banner><h2><a href=https://joelkitching.com/>Joel Kitching</a></h2><nav><ul><li><a href=/ title>writing</a></li><li><a href=/about/ title>about</a></li><li><a href=https://github.com/jkitching title>github</a></li><li><a href=https://www.linkedin.com/in/joelkitching title>linkedin</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>The |& operator: piping stderr since 1978</h1><div><time>December 23, 2025</time></div></header><p>When running a command, it&rsquo;s often useful to save output to a file while also displaying it on the terminal. The <code>tee</code> command handles this elegantly:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>./my-script.sh <span class=p>|</span> tee output.log
</span></span></code></pre></div><p>But this only captures stdout. To also capture stderr, the traditional approach is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>./my-script.sh 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>|</span> tee output.log
</span></span></code></pre></div><p>I recently learned about the fancy shorthand operator <code>|&</code>, which does the same:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>./my-script.sh <span class=p>|&amp;</span> tee output.log
</span></span></code></pre></div><p>This implicitly redirects stderr to stdout, then pipes the combined stream to <code>tee</code>. Both streams appear on the terminal and in <code>output.log</code>.</p><p>Ridiculously cool. But we must go deeper! Where did this operator come from?</p><h2 id=bill-joy-and-csh>Bill Joy and csh</h2><p>The <code>|&</code> syntax predates Bash by decades. It originated in the C shell (csh), created by Bill Joy at UC Berkeley and first distributed with 2BSD in 1978. Unlike stdout, which could be redirected with <code>></code>, csh had no way to redirect stderr alone&mdash;so <code>|&</code> was the only option for piping error output.</p><h2 id=the-ksh-conflict>The ksh conflict</h2><p>The syntax went unchallenged for a decade. Then in 1988, ksh (the Korn shell) claimed the same <code>|&</code> for a completely different purpose: starting a <em>coprocess</em>. Now the same two characters mean completely different things depending on your shell.</p><blockquote><p>A <strong>coprocess</strong> is a background process with a bidirectional pipe&mdash;your script can both write to its stdin and read from its stdout. Handy for interactive programs like calculators or REPLs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>bc <span class=p>|&amp;</span>  <span class=c1># start bc as a coprocess</span>
</span></span><span class=line><span class=cl>print -p <span class=s1>&#39;scale=3&#39;</span>
</span></span><span class=line><span class=cl>print -p <span class=s1>&#39;5 / 3&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -p result  <span class=c1># result = 1.666</span>
</span></span></code></pre></div></blockquote><h2 id=bash-picks-a-side>Bash picks a side</h2><p>When Bash 4.0 arrived in 2009, it introduced <code>|&</code> with csh&rsquo;s semantics (pipe stderr+stdout together) and added a separate <code>coproc</code> keyword for ksh-style bidirectional pipes. zsh made the same choice.</p><h2 id=should-you-use-it>Should you use it?</h2><p>Of course! It&rsquo;s short and convenient. Although I still seems to bugger up the order of those two characters half the time. The <code>2>&amp;1 |</code> form is more portable and universally understood, so perhaps still better to use in a shared codebase.</p><p>See also: <a href=https://stackoverflow.com/questions/692000/how-do-i-write-standard-error-to-a-file-while-using-tee-with-a-pipe>How do I write standard error to a file while using &ldquo;tee&rdquo; with a pipe?</a> on Stack Overflow.</p></article></main><footer id=footer>Copyright © 2022–2024 Joel Isaac Stewart Davies-Kitching</footer></body></html>