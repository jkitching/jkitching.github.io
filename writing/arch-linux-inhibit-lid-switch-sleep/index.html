<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Joel Kitching"><link rel="shortcut icon" href=https://joelkitching.com/favicon.ico><link rel=stylesheet href=/css/style.min.css><link rel=canonical href=https://joelkitching.com/writing/arch-linux-inhibit-lid-switch-sleep/><title>Arch Linux: inhibiting sleep triggered by lid switch</title></head><body><header id=banner><h2><a href=https://joelkitching.com/>Joel Kitching</a></h2><nav><ul><li><a href=/ title>writing</a></li><li><a href=/about/ title>about</a></li><li><a href=https://github.com/jkitching title>github</a></li><li><a href=https://www.linkedin.com/in/joelkitching title>linkedin</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>Arch Linux: inhibiting sleep triggered by lid switch</h1><div><time>January 10, 2026</time></div></header><p>Sometimes I want to run long jobs overnight on my laptop, or even charge my phone while the laptop is closed in my backpack (getting USB to have power when suspended is another longstanding problem).</p><p>For quite a while, I tried different variations of <code>gnome-session-inhibit</code> and <code>systemd-inhibit</code>. But they never worked properly!</p><p>Finally, I found this gem on the Arch Linux forum: <a href="https://bbs.archlinux.org/viewtopic.php?id=216236">Systemd-inhibit doesn&rsquo;t prevent sleep</a></p><blockquote><p>Turns out in /etc/systemd/logind.conf, LidSwitchIgnoreInhibited defaults to yes.</p><p>Uncomment the line, set it to no, and restart fixes the issue for me.</p></blockquote><p>Note that after making this configuration change, you must restart your system.</p><h2 id=inhibit-suspend>Inhibit suspend</h2><p>Then, either of these commands can be used to inhibit sleep:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemd-inhibit --what<span class=o>=</span>sleep --mode<span class=o>=</span>block sleep inf
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gnome-session-inhibit --inhibit <span class=nb>suspend</span> --inhibit-only
</span></span></code></pre></div><p>The first talks to systemd-logind at the system level, the second talks to the GNOME session manager. Both achieve the same result on a GNOME desktop, but <code>systemd-inhibit</code> is more portable across desktop environments.</p><h2 id=inhibit-lock-screen>Inhibit lock screen</h2><p>To also prevent the screen from locking, add <code>idle</code> to the GNOME command (systemd&rsquo;s idle inhibition doesn&rsquo;t prevent screen lock):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gnome-session-inhibit --inhibit suspend:idle --inhibit-only
</span></span></code></pre></div></article></main><footer id=footer>Copyright © 2022–2024 Joel Isaac Stewart Davies-Kitching</footer></body></html>