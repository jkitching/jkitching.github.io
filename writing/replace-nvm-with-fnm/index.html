<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Joel Kitching"><link rel="shortcut icon" href=https://joelkitching.com/favicon.ico><link rel=stylesheet href=/css/style.min.css><link rel=canonical href=https://joelkitching.com/writing/replace-nvm-with-fnm/><title>Replacing nvm with fnm for faster shell startup</title></head><body><header id=banner><h2><a href=https://joelkitching.com/>Joel Kitching</a></h2><nav><ul><li><a href=/ title>writing</a></li><li><a href=/about/ title>about</a></li><li><a href=https://github.com/jkitching title>github</a></li><li><a href=https://www.linkedin.com/in/joelkitching title>linkedin</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>Replacing nvm with fnm for faster shell startup</h1><div><time>January 16, 2026</time></div></header><p>If you&rsquo;ve used <a href=https://github.com/nvm-sh/nvm>nvm</a> (Node Version Manager) for any length of time, you&rsquo;ve probably noticed the shell startup delay. On my machine, nvm adds roughly 300-500ms to every new terminal&mdash;enough to feel sluggish.</p><p>The common workaround is lazy loading. oh-my-zsh even has built-in support for it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>zstyle <span class=s2>&#34;:omz:plugins:nvm&#34;</span> lazy yes
</span></span><span class=line><span class=cl><span class=nv>NVM_LAZY_LOAD</span><span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></div><p>This defers nvm initialization until you actually run <code>node</code>, <code>npm</code>, or <code>nvm</code>. But lazy loading only wraps a fixed list of commands (<code>nvm</code>, <code>node</code>, <code>npm</code>, <code>npx</code>, etc.). Globally-installed binaries like <code>claude</code> aren&rsquo;t wrapped by default&mdash;you need to add them manually:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>zstyle <span class=s1>&#39;:omz:plugins:nvm&#39;</span> lazy-cmd claude
</span></span></code></pre></div><p>Either way, you&rsquo;re working around nvm&rsquo;s slow startup rather than solving it.</p><h2 id=fnm-a-faster-alternative>fnm: A faster alternative</h2><p><a href=https://github.com/Schniz/fnm>fnm</a> (Fast Node Manager) is a drop-in replacement written in Rust. It&rsquo;s a single binary with near-instant startup&mdash;no lazy loading needed.</p><h2 id=installation>Installation</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -fsSL https://fnm.vercel.app/install <span class=p>|</span> bash
</span></span></code></pre></div><p>This installs fnm to <code>~/.local/share/fnm</code>.</p><h2 id=shell-configuration>Shell configuration</h2><p>Add to your <code>.zshrc</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl><span class=nv>FNM_PATH</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/.local/share/fnm&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -d <span class=s2>&#34;</span><span class=nv>$FNM_PATH</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$FNM_PATH</span><span class=s2>:</span><span class=nv>$PATH</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>eval</span> <span class=s2>&#34;</span><span class=k>$(</span>fnm env<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>The <code>fnm env</code> command creates a per-shell temporary directory at <code>/run/user/$UID/fnm_multishells/&lt;pid>_&lt;timestamp>/bin/</code> with symlinks to the active Node version. This allows different terminals to use different Node versions simultaneously.</p><h2 id=install-node-and-restore-global-packages>Install Node and restore global packages</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>fnm install --latest
</span></span></code></pre></div><p>Then reinstall any global packages you need:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -g @anthropic-ai/claude-code
</span></span></code></pre></div><h2 id=optional-auto-switch-versions-per-directory>Optional: auto-switch versions per directory</h2><p>If you use <code>.nvmrc</code> or <code>.node-version</code> files in your projects, add <code>--use-on-cd</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl><span class=nb>eval</span> <span class=s2>&#34;</span><span class=k>$(</span>fnm env --use-on-cd<span class=k>)</span><span class=s2>&#34;</span>
</span></span></code></pre></div><h2 id=cleanup>Cleanup</h2><p>Once you&rsquo;ve verified fnm works, you can remove nvm:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rm -rf ~/.nvm
</span></span></code></pre></div><p>And remove any nvm-related lines from your <code>.zshrc</code>.</p></article></main><footer id=footer>Copyright © 2022–2024 Joel Isaac Stewart Davies-Kitching</footer></body></html>